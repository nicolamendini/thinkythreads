(this.webpackJsonpthinkythreads=this.webpackJsonpthinkythreads||[]).push([[9],{380:function(e,r,t){"use strict";t.r(r);var o=t(1),s=t(337),n=t(345),a=t(372),c=t(335),l=t(336),d=(t(371),t(82)),i=t.n(d),b=t(12),h=t(9),j=function(e){var r=e.threadOrCollectionManage,t=e.threadOrCollection,o=e.setRootsOrBranches,d=e.rootsOrBranches,j=e.setDarkMode,g=e.mergeMode,u=e.setMergeMode,O=e.selectedNote,m=e.setCurrentPage,f=e.notesUpdating,p=e.loadedUser,x=e.synchNotes,k=e.darkMode,N=function(){window.localStorage.setItem("dark-mode",!k),j((function(e){return!e}))};return Object(h.jsxs)("div",{className:"page-footer",style:k?{borderTop:"1px solid #2a2a2a",backgroundColor:"#1b1b1b"}:{borderTop:"#dddddd",background:"linear-gradient(#eeeeee, white)",boxShadow:"0 0 3px #bbbbbb"},children:[k?Object(h.jsx)(c.c,{className:"tools-btn",onClick:function(){return m("settings")},size:"2.5em",style:{transform:"scale(0.75)"}}):Object(h.jsx)(s.l,{className:"tools-btn",onClick:function(){return m("settings")},size:"2.5em"}),t?k?Object(h.jsx)(n.d,{onClick:function(){return r(!t)},size:"2.5em",className:"tools-btn",style:{transform:"rotate(45deg) scale(0.85)"}}):Object(h.jsx)(s.f,{onClick:function(){return r(!t)},size:"2.5em",className:"tools-btn"}):k?Object(h.jsx)(n.b,{onClick:function(){return r(!t)},size:"2.5em",className:"tools-btn",style:{transform:"rotate(45deg) scale(0.85)"}}):Object(h.jsx)(s.a,{onClick:function(){return r(!t)},size:"2.5em",className:"tools-btn"}),k?Object(h.jsx)(l.b,{onClick:function(){return o((function(e){return!e}))},size:"2em",className:"tools-btn",style:!d&&{transform:"scaleY(-1)"}}):Object(h.jsx)(s.h,{onClick:function(){return o((function(e){return!e}))},size:"2.3em",className:"tools-btn",style:d?{transform:"scaleY(-1) rotate(90deg)"}:{transform:"rotate(90deg)"}}),O?k?Object(h.jsx)(n.c,{onClick:function(){u((function(e){return!e})),g||alert(b.j)},size:"1.8em",className:"tools-btn",style:{transform:"scaleX(1.1) rotate(-90deg)"}}):Object(h.jsx)(s.e,{onClick:function(){u((function(e){return!e})),g||alert(b.j)},size:"2.3em",className:"tools-btn",style:{transform:"scaleY(1.15) rotate(-90deg)"}}):null,k?Object(h.jsx)(a.a,{onClick:function(){return N()},size:"2.5em",className:"tools-btn",style:{transform:"scaleY(0.7) scaleX(0.7)"}}):Object(h.jsx)(s.d,{onClick:function(){return N()},size:"2.5em",className:"tools-btn"}),p?f>0?k?Object(h.jsx)(c.d,{size:"2em"}):Object(h.jsx)(i.a,{type:"Circles",color:"#00BFFF",height:"1.8em",width:"2.3em"}):k?Object(h.jsx)(c.a,{size:"2em",className:"tools-btn",onClick:function(){return x()},style:{transform:"scaleY(0.85)"}}):Object(h.jsx)(s.c,{size:"2.3em",className:"tools-btn",onClick:function(){return x()}}):k?Object(h.jsx)(n.f,{size:"1.8em",onClick:function(){return alert(b.f)},style:{transform:"scaleX(-1)"}}):Object(h.jsx)(s.b,{size:"2.3em",onClick:function(){return alert(b.f)}})]})},g=t(8),u=t(334),O=t(5),m=t(378),f=t(26),p=t(79),x=t(375),k=t(376),N=t(377),C=t(344),v=function(e){var r=e.note,t=e.areaName,o=e.index,s=e.handleNotePress,n=e.darkMode,a=e.selectedNote,c=e.mergeMode,l=e.openEditor,d=e.rootsOrBranches,i=e.triggerRerender;return Object(h.jsx)(u.b,{draggableId:r.ui_id,index:o,children:function(e,o){return Object(h.jsx)("div",{children:Object(h.jsxs)("li",Object(O.a)(Object(O.a)(Object(O.a)({className:(c&&a.id===r.id?"note no-scrollbar merge-mode":n&&a&&a.id===r.id&&"note note-dark no-scrollbar selected-note-dark")||n&&(!a||a.id!==r.id)&&"note note-dark no-scrollbar"||!n&&a&&a.id===r.id&&"note note-bright no-scrollbar selected-note"||!n&&(!a||a.id!==r.id)&&"note note-bright no-scrollbar",name:r.id,id:r.ui_id,ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{onClick:function(){s(r)},onDoubleClick:function(){return l(r)},style:c&&a.id===r.id?e.draggableProps.style:n||"#ffffff"===r.color?"#ffffff"!==r.color?Object(O.a)({backgroundImage:"linear-gradient(25deg, rgb(92, 92, 92) 92%, "+r.colorPreview+" 92%)"},e.draggableProps.style):e.draggableProps.style:a&&a.id===r.id?Object(O.a)({backgroundColor:r.color},e.draggableProps.style):Object(O.a)({backgroundColor:r.color,border:"1px solid "+r.color},e.draggableProps.style),children:[o.isDropAnimating,a&&a.id===r.id&&i,Object(h.jsxs)("div",{children:[r.pinned&&"search-area"===t&&Object(h.jsx)(x.a,{size:"10px",className:"header-icon"}),r.thread.length?Object(h.jsx)(k.b,{size:"10px",className:"header-icon"}):"",r.collection.length?Object(h.jsx)(k.a,{size:"10px",className:"header-icon"}):"",!d&&r.branches.length?Object(h.jsx)(N.a,{size:"10px",className:"header-icon"}):"",d&&r.roots.length?Object(h.jsx)(N.a,{size:"10px",className:"header-icon",style:{transform:"scaleY(-1)"}}):"",r.attachedImg&&!r.attachedImg[2]?Object(h.jsx)(C.b,{size:"10px",className:"header-icon",style:{transform:"rotate(-45deg)"}}):""]}),r.attachedImg&&r.attachedImg[2]?Object(h.jsx)("div",{className:"just-background-note",style:{backgroundImage:"url("+r.text+")"}}):Object(h.jsx)("div",{className:"note-content no-scrollbar",dangerouslySetInnerHTML:{__html:r.preview}})]}))})}},r.ui_id)},w=function(e){var r=e.threadOrCollection,t=e.notesLength,o=e.draggableInfo,s=e.notes,n=e.darkMode,a="search-area"!==o.sourceArea||(t>0?o.note.thread.length>0||o.note.collection.length>0:!o.note.thread.length&&!o.note.collection.length)||void 0!==s.find((function(e){return e.id===o.note.id}));return Object(h.jsx)(u.c,{droppableId:"wrapper-area",isDropDisabled:a,children:function(e,s){return Object(h.jsxs)("div",Object(O.a)(Object(O.a)({className:"wrapper"},e.droppableProps),{},{ref:e.innerRef,style:t>0?Object(O.a)(Object(O.a)({},n?r?{backgroundColor:"#fccb00",color:"black"}:{backgroundColor:"#1273de",color:"white"}:r?{backgroundColor:"#fef3bd",color:"black"}:{backgroundColor:"#c4def6",color:"black"}),!s.isDraggingOver&&{minWidth:"8vh"}):n?{backgroundColor:"#2e2e2e",minWidth:"8vh",color:"#666666"}:{backgroundColor:"#f4f4f4",minWidth:"8vh",boxShadow:"1px 0px 1px #dddddd"},children:[Object(h.jsx)("div",{className:"vertical-text",children:t>0?"WRAP":"drop to expand"}),e.placeholder,s.isDraggingOver?t>0?Object(h.jsxs)("div",{className:"vertical-text",children:["wrap ",Object(h.jsx)("br",{}),r?" thread ":" collection ",Object(h.jsx)("br",{}),"inside note"]}):Object(h.jsxs)("div",{className:"vertical-text",children:["expand",Object(h.jsx)("br",{}),o.note.thread.length?"thread":"collection"]}):null]}))}})},M=t(13),I={beginning:!1},S=function(e,r,t,o,s){var n=-1===e?{inline:"start"}:{inline:"end"},a=r*M.d+M.d-1;a>o.length-1&&(a=o.length-1),document.getElementById(o[a].ui_id).scrollIntoView(n),t(r+e),window.sessionStorage.setItem("current-slice-"+s,r+e),"search-area"===s&&(M.c.currentSearchSlice=r+e)},y=function(e){var r=e.notes,t=e.handleAddNote,n=e.areaName,a=e.handleNotePress,c=e.darkMode,l=e.selectedNote,d=e.mergeMode,i=e.threadOrCollection,b=e.openEditor,j=e.workspaceFlag,m=e.rootsOrBranches,f=e.isDropDisabled,x=e.draggableInfo,k=e.cleanFilters,N=e.setCleanFilters,C=e.triggerRerender,y=window.sessionStorage.getItem("current-slice-"+n),P=Object(o.useState)(y?parseInt(y):0),F=Object(g.a)(P,2),z=F[0],E=F[1],D=Object(o.useState)(!1),R=Object(g.a)(D,2),B=R[0],A=R[1],T=function(e){if(l){var r=e.find((function(e){return e.id===l.id}));if(r){var t=document.getElementById(r.ui_id);if(t)return t.scrollIntoView({inline:"center"}),!0}}};Object(o.useEffect)((function(){var e=r.slice(z*M.d,(z+1)*M.d+M.d),t=T(e);e.length||0===z||t||(E(0),window.sessionStorage.setItem("current-slice-"+n,0),"search-area"===n&&(M.c.currentSearchSlice=0)),A(!0)}),[r]),Object(o.useEffect)((function(){if(M.c.usingScrollKeys){var e=r.slice(z*M.d,(z+1)*M.d+M.d);T(e),M.c.usingScrollKeys=!1,A(!0)}}),[l]),Object(o.useEffect)((function(){"search-area"===n&&k.goClean&&z>0&&(E(0),window.sessionStorage.setItem("current-slice-"+n,0),M.c.currentSearchSlice=0)}),[k]),Object(o.useEffect)((function(){if("search-area"===n){var e=Object(O.a)({},k);if(e.areSlicesScrolled=z>0,I.beginning){var r=document.getElementById("plus");r&&r.scrollIntoView(),I.beginning=!1}N(e)}}),[z]);var W=r.slice(z*M.d,(z+1)*M.d+M.d);return Object(h.jsx)("div",{style:{visibility:B?"visible":"hidden"},children:Object(h.jsx)(u.c,{droppableId:n,direction:"horizontal",className:"droppable-wrapper",isDropDisabled:f,children:function(e){return Object(h.jsxs)("ul",Object(O.a)(Object(O.a)({className:"notes-list"},e.droppableProps),{},{ref:e.innerRef,id:n,children:[Object(h.jsx)("div",{children:z>0?c?Object(h.jsx)(p.a,{className:"tools-btn arrow-btn",onClick:function(){return S(-1,z,E,r,n)},size:"2em",color:"#666666"}):Object(h.jsx)(s.j,{className:"tools-btn arrow-btn",onClick:function(){return S(-1,z,E,r,n)},size:"2em"}):null}),"workspace-area"===n&&j&&Object(h.jsx)(w,{threadOrCollection:i,notesLength:r.length,draggableInfo:x,notes:r,darkMode:c}),Object(h.jsx)("div",{children:"search-area"===n&&0===z&&(c?Object(h.jsx)(p.e,{className:"tools-btn arrow-btn add-btn",onClick:function(){return t()},size:"2.25em",color:"#555555",style:{transform:"scale(0.8)"},id:"plus"}):Object(h.jsx)(s.i,{className:"tools-btn arrow-btn add-btn",onClick:function(){return t()},size:"2.25em",id:"plus"}))}),W.map((function(e,r){return Object(h.jsx)(v,{note:e,areaName:n,index:r+z*M.d,handleNotePress:a,darkMode:c,selectedNote:l,mergeMode:d,openEditor:b,rootsOrBranches:m,triggerRerender:C},e.ui_id)})),e.placeholder,Object(h.jsx)("div",{children:(z+1)*M.d+M.d<r.length?c?Object(h.jsx)(p.b,{className:"tools-btn arrow-btn",onClick:function(){return S(1,z,E,r,n)},size:"2em",color:"#666666"}):Object(h.jsx)(s.g,{className:"tools-btn arrow-btn",onClick:function(){return S(1,z,E,r,n)},size:"2em"}):null})]}))}})})},P=function(e,r,t){var o=Object(O.a)({},r);e.threadFilter||e.collectionFilter||e.imgFilter||"#ededed"!==e.colorFilter||e.searchText?o.areFiltersOn=!0:o.areFiltersOn=!1,t(o)},F=function(e){var r=e.setSearchProps,t=e.searchProps,n=e.isDropDisabled,a=e.darkMode,l=e.cleanFilters,d=e.setCleanFilters;return Object(o.useEffect)((function(){if(l.goClean){var e=Object(O.a)({},l);e.goClean=!1,d(e)}}),[l]),Object(h.jsx)(u.c,{droppableId:"search-bar",isDropDisabled:n,children:function(e,o){return Object(h.jsxs)("div",Object(O.a)(Object(O.a)({className:a?"search-dark":"search-bright"},e.droppableProps),{},{ref:e.innerRef,children:[l.areSlicesScrolled||l.areFiltersOn?Object(h.jsx)(c.b,{size:"1.6em",className:"tools-btn search-icons",onClick:function(){return function(e,r,t){var o=Object(O.a)({},e);o.goClean=!0,o.areFiltersOn=!1,I.beginning=!0,r(o),t({searchText:"",threadFilter:!1,collectionFilter:!1,colorFilter:"#ededed",imgFilter:!1})}(l,d,r)},color:a?"#666666":"#464646",style:{paddingTop:"3px",transform:"scale(0.8)"}}):a?Object(h.jsx)(m.a,{className:"search-icons",size:"2em"}):Object(h.jsx)(s.k,{className:"search-icons",size:"2em"}),e.placeholder,Object(h.jsx)("input",{onChange:function(e){var o=Object(O.a)({},t);o.searchText=e.target.value.toLowerCase(),P(o,l,d),r(o)},type:"text",placeholder:o.isDraggingOver?"Work within this collection":"Type to search",value:t.searchText}),Object(h.jsx)("span",{className:"search-filter tools-btn",style:t.imgFilter?{color:"red"}:{},onClick:function(){var e=Object(O.a)({},t);e.imgFilter=!e.imgFilter,P(e,l,d),r(e)},children:Object(h.jsx)(p.d,{size:"0.9em",style:{marginTop:"4px",transform:"rotate(180deg)"}})}),Object(h.jsx)("span",{className:"search-filter tools-btn",style:t.threadFilter?{color:"red"}:{},onClick:function(){var e=Object(O.a)({},t);e.threadFilter=!e.threadFilter,P(e,l,d),r(e)},children:"T"}),Object(h.jsx)("span",{className:"search-filter tools-btn",style:t.collectionFilter?{color:"red"}:{},onClick:function(){var e=Object(O.a)({},t);e.collectionFilter=!e.collectionFilter,P(e,l,d),r(e)},children:"C"}),Object(h.jsx)("span",{style:{margin:"0 5px 0 0"},children:Object(h.jsx)(f.a,{setBackColor:{},setHasChanged:{},searchProps:t,setSearchProps:r,searchCleanerCheck:function(e){return P(e,l,d)}})})]}))}})},z=t(6),E=function(e){var r=e.searchProps,t=e.closeCollection,o=e.dashboard,s=e.darkMode;return Object(h.jsxs)("div",{className:"stripe-label",children:[Object(h.jsxs)("div",{className:"stripe-not-overflow",style:{width:"80vw"},children:["NOTE FINDER",r.threadFilter&&" - THREADS",r.collectionFilter&&" - COLLECTIONS",o.openedCollectionId&&" : "+Object(z.g)(o.notes.get(o.openedCollectionId))]}),o.openedCollectionId&&Object(h.jsx)("div",{children:Object(h.jsx)(c.b,{size:"2em",className:"tools-btn close-btn",onClick:function(){return t()},color:s?"white":"black"})})]})},D=function(e){var r=e.closeCollection,t=e.dashboard,s=e.darkMode,n=e.addNote,a=e.selectNote,c=e.mergeMode,l=e.threadOrCollection,d=e.openEditor,i=e.rootsOrBranches,b=e.searchProps,j=e.setSearchProps,u=e.draggableInfo,O=e.triggerRerender,m="search-area"!==u.sourceArea||!u.note.collection.length,f=Object(o.useState)({areSlicesScrolled:!1,areFiltersOn:!1,goClean:!1}),p=Object(g.a)(f,2),x=p[0],k=p[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)(F,{setSearchProps:j,searchProps:b,isDropDisabled:m,darkMode:s,cleanFilters:x,setCleanFilters:k}),Object(h.jsxs)("div",{children:[Object(h.jsx)(E,{searchProps:b,closeCollection:r,dashboard:t,darkMode:s}),Object(h.jsx)(y,{notes:t.search,handleAddNote:n,areaName:"search-area",handleNotePress:a,darkMode:s,selectedNote:t.notes.get(t.selectedNoteId),mergeMode:c,threadOrCollection:l,openEditor:d,rootsOrBranches:i,cleanFilters:x,setCleanFilters:k,triggerRerender:O})]})]})},R=function(e){var r=e.dashboard,t=e.threadOrCollection,o=e.closeAndSave,s=e.darkMode;return Object(h.jsxs)("div",{className:"stripe-label",children:[Object(h.jsxs)("div",{className:"stripe-not-overflow",style:{width:"80vw"},children:["CURRENT ",t?" THREAD ":" COLLECTION ",r.openedWorkspaceId?" : "+Object(z.g)(r.notes.get(r.openedWorkspaceId)):r.workspaceIds.length?t?" : unsaved thread ":" : unsaved collection ":null]}),r.workspaceIds.length||r.openedWorkspaceId?Object(h.jsx)("div",{children:Object(h.jsx)(c.b,{size:"2em",className:"tools-btn close-btn",onClick:function(){return o()},color:s?"white":"black"})}):null]})},B=function(e){var r=e.dashboard,t=e.darkMode,o=e.selectNote,s=e.mergeMode,n=e.threadOrCollection,a=e.openEditor,c=e.rootsOrBranches,l=e.closeAndSave,d=e.draggableInfo,i=e.triggerRerender;return Object(h.jsxs)("div",{children:[Object(h.jsx)(R,{dashboard:r,threadOrCollection:n,closeAndSave:l,darkMode:t}),Object(h.jsx)(y,{notes:r.workspace,areaName:"workspace-area",handleNotePress:o,darkMode:t,selectedNote:r.notes.get(r.selectedNoteId),mergeMode:s,threadOrCollection:n,openEditor:a,workspaceFlag:!r.openedWorkspaceId,rootsOrBranches:c,draggableInfo:d,triggerRerender:i})]})},A=function(e){var r=e.dashboard,t=e.darkMode,o=e.mergeMode,s=e.threadOrCollection,n=e.openEditor,a=e.rootsOrBranches,c=e.draggableInfo,l=e.triggerRerender,d="workspace-area"===c.sourceArea||c.note&&c.note.id===r.selectedNoteId;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("label",{className:"stripe-label stripe-not-overflow",style:{width:"90vw"},children:[a?" ROOTS":" BRANCHES",r.selectedNoteId&&" - "+Object(z.g)(r.notes.get(r.selectedNoteId))]}),Object(h.jsx)(y,{notes:r.links,areaName:"branches-area",darkMode:t,handleNotePress:function(){},selectedNote:r.notes.get(r.selectedNoteId),mergeMode:o,threadOrCollection:s,openEditor:function(e){o||(M.c.editorModeSelection="prev",r.prevSelectedNoteId=r.selectedNoteId,r.selectedNoteId=e.id,n())},rootsOrBranches:a,isDropDisabled:d,triggerRerender:l})]})},T=function(e){var r=e.handleOnDragEnd,t=e.closeCollection,s=e.dashboard,n=e.darkMode,a=e.addNote,c=e.selectNote,l=e.mergeMode,d=e.threadOrCollection,i=e.openEditor,b=e.rootsOrBranches,j=e.closeAndSave,O=e.searchProps,m=e.setSearchProps,f=e.triggerRerender,p=Object(o.useState)({sourceArea:"",note:{id:null}}),x=Object(g.a)(p,2),k=x[0],N=x[1];return Object(h.jsxs)(u.a,{onDragEnd:r,onDragStart:function(e){return function(e,r,t){window.navigator.vibrate&&window.navigator.vibrate(25);var o={},s=e.source.droppableId;o.sourceArea=s;var n=e.source.index,a=null;"workspace-area"===s?a=r.workspace[n]:"search-area"===s?a=r.search[n]:"links-area"===s&&(a=r.links[n]),a&&(o.note=a),t(o)}(e,s,N)},children:[Object(h.jsx)(D,{closeCollection:t,dashboard:s,darkMode:n,addNote:a,selectNote:c,mergeMode:l,threadOrCollection:d,openEditor:i,rootsOrBranches:b,searchProps:O,setSearchProps:m,draggableInfo:k,triggerRerender:f}),Object(h.jsx)(B,{dashboard:s,darkMode:n,selectNote:c,mergeMode:l,threadOrCollection:d,openEditor:i,rootsOrBranches:b,closeAndSave:j,draggableInfo:k,triggerRerender:f}),Object(h.jsx)(A,{dashboard:s,darkMode:n,mergeMode:l,threadOrCollection:d,openEditor:i,rootsOrBranches:b,draggableInfo:k,triggerRerender:f})]})};r.default=function(e){var r=e.darkMode,t=e.dashboard,o=e.handleOnDragEnd,s=e.GAPIloaded,n=e.currentUser,a=e.setCurrentPage,c=e.notesUpdating,l=e.setDarkMode,d=e.closeCollection,i=e.addNote,b=e.selectNote,g=e.mergeMode,u=e.setMergeMode,O=e.openEditor,m=e.rootsOrBranches,f=e.closeAndSave,p=e.threadOrCollection,x=e.threadOrCollectionManage,k=e.setRootsOrBranches,N=e.searchProps,C=e.setSearchProps,v=e.synchNotes,w=e.editorMode,M=e.triggerRerender;return Object(h.jsxs)("div",{className:r?"container dark-mode":"container",children:[Object(h.jsx)(T,{handleOnDragEnd:o,closeCollection:d,dashboard:t,darkMode:r,addNote:i,selectNote:b,mergeMode:g,threadOrCollection:p,openEditor:O,rootsOrBranches:m,closeAndSave:f,searchProps:N,setSearchProps:C,editorMode:w,triggerRerender:M}),Object(h.jsx)(j,{threadOrCollectionManage:x,threadOrCollection:p,setRootsOrBranches:k,rootsOrBranches:m,setDarkMode:l,mergeMode:g,setMergeMode:u,selectedNote:t.notes.get(t.selectedNoteId),setCurrentPage:a,notesUpdating:c,loadedUser:s&&n,synchNotes:v,darkMode:r})]})}}}]);
//# sourceMappingURL=9.e1d75207.chunk.js.map