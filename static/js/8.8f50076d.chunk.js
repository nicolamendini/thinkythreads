(this.webpackJsonpthinkythreads=this.webpackJsonpthinkythreads||[]).push([[8],{383:function(e,t,o){"use strict";o.r(t);var n=o(10),r=o(1),c=o(350),a=o.n(c),i=(o(367),o(5)),l=o(347),s=o(80),d=o(338),u=o(27),b=o(346),h=o(124),p=o(9),m=function(e){var t=e.selectedNote,o=e.open,n=e.setOpen,r=e.saveAndExit,c=e.exportThread,a=e.threadCollectionSwap,i=e.openOccurrences,l=e.moveToTheExtremity;return Object(p.jsx)(h.a,{trigger:Object(p.jsx)("div",{children:Object(p.jsx)(b.a,{className:"tools-btn",size:"1.5em",onClick:function(){return n(!0)}})}),nested:!0,modal:!0,open:o,children:Object(p.jsx)("div",{className:"blurrer",onClick:function(){return n(!1)},children:Object(p.jsxs)("div",{className:"modal menu-popup",children:[Object(p.jsx)("button",{className:"popup-btn tools-btn",onClick:function(){i(),r(!1,!0)},children:"Show Threads or Collections that contain this Note"}),Object(p.jsx)("button",{className:"popup-btn tools-btn",onClick:function(){l(!0),r(!0)},children:"Save and move to the end of the Search"}),Object(p.jsx)("button",{className:"popup-btn tools-btn",onClick:function(){l(),r(!0)},children:"Save and move to the beginning of the Search"}),t.thread.length?Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{className:"popup-btn tools-btn",onClick:function(){return c()},children:"Print or Export whole Thread"}),Object(p.jsx)("button",{className:"popup-btn tools-btn",onClick:function(){return a(!0)},children:"Convert Thread to Collection"})]}):t.collection.length?Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:"popup-btn tools-btn",onClick:function(){return a(!1)},children:"Convert Collection to Thread"})}):null]})})})},j=o(6),g=o(24),f=o(13),O=o(141),x=function(e){var t=e.setCurrentPage,o=e.selectedNote,c=e.updateNote,a=e.editorState,b=e.deleteNote,h=e.darkMode,x=e.exportThread,v=e.setBackColor,k=e.threadCollectionSwap,C=e.moveToTheExtremity,N=e.dashboard,y=e.openOccurrences,S=e.packDashboard,T=e.editorRef,w="";o&&(w=o.pinned);var z=Object(r.useState)(w),E=Object(n.a)(z,2),D=E[0],P=E[1],R=Object(r.useState)(!1),B=Object(n.a)(R,2),M=B[0],A=B[1],I=Object(r.useState)(!1),Q=Object(n.a)(I,2),F=Q[0],H=Q[1],J=function(){H(!0),o.pinned=!o.pinned,P(o.pinned)},U=function(e,n){if(f.c.closingEditor=!0,o.text===a&&!F&&""!==a&&!e)return t("notes"),Object(j.e)(o),Object(g.b)(N),void(n&&S(Object(i.a)({},N),!1,!0));o.text=a,Object(j.m)(o),"empty note kept for its links"!==o.preview||o.thread.length||o.collection.length||o.branches.length||o.attachedImg?(c(o),t("notes")):(b(o.id),t("notes"))};if(O.bind(["ctrl+s","meta+s"],(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,a.replace(/<img .*?>/gm,"0").replace(/<[^>]*>?/gm,"")&&U()})),T&&T.current&&T.current.editor){var V=T.current.editor.keyboard.bindings[83];V&&V.pop(),T.current.editor.keyboard.addBinding({key:"s",shortKey:!0,handler:function(){return a.replace(/<[^>]*>?/gm,"")&&U()}})}return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"page-footer",style:{color:h?"#636363":"#171717"},children:[Object(p.jsx)(d.a,{className:"tools-btn",onClick:function(){return U()},size:"2.5em"}),D?Object(p.jsx)(l.a,{className:"tools-btn",onClick:function(){return J()},size:"1.75em",style:{transform:"rotate(-45deg)"}}):Object(p.jsx)(l.e,{className:"tools-btn",onClick:function(){return J()},size:"1.75em"}),Object(p.jsx)(u.a,{selectedNote:o,setBackColor:v,setHasChanged:H}),Object(p.jsx)(s.f,{className:"tools-btn",onClick:function(){window.confirm("Delete the note?")&&(b(o.id),t("notes"))},size:"1.65em"}),Object(p.jsx)(m,{selectedNote:o,open:M,setOpen:A,saveAndExit:U,exportThread:x,threadCollectionSwap:k,openOccurrences:y,moveToTheExtremity:C})]})})},v=o(368),k=o.n(v),C=o(369),N=o.n(C),y=o(16),S=o(12);c.Quill.register("modules/imageCompressor",k.a),c.Quill.register("modules/imageResize",N.a);var T={toolbar:[{header:"1"},{header:"2"},"bold","italic","underline","strike",{color:[]},{background:[]},{list:"ordered"},{list:"bullet"},{align:[]},"image","code-block","formula","blockquote","link"],imageCompressor:{maxWidth:800,maxHeight:800,imageType:"image/jpeg",debug:!1},history:{delay:2e3,maxStack:500,userOnly:!0},clipboard:{matchVisual:!1},imageResize:{parchment:c.Quill.import("parchment"),modules:["Resize","DisplaySize"]}},w=function(e,t,o,n){o.current&&(!function(e,t){var o=e.ops,n=t.getSelection();if(n){var r=n.index,c=n.length;if(void 0===o[0].retain||!o[1]||!o[1].insert||!o[1].insert||"\n"!==o[1].insert||c>0)return;setTimeout((function(){t.getSelection().index===r&&(console.log("Change selection bad pos"),t.setSelection(t.getSelection().index+1,0))}),30)}}(t,o.current.editor),e.length<f.e?n(e):Object(S.b)(y.c))};t.default=function(e){var t=e.setCurrentPage,o=e.dashboard,c=e.updateNote,i=e.deleteNote,l=e.darkMode,s=e.exportThread,d=e.threadCollectionSwap,u=e.moveToTheExtremity,b=e.openOccurrences,h=e.packDashboard,m=e.setDelayedNoteUpdate,g=o.notes.get(o.selectedNoteId),f="",O={color:"",colorPreview:""};g&&g.text&&(f=g.text,O.color=g.color,O.colorPreview=g.colorPreview);var v=Object(r.useState)(f),k=Object(n.a)(v,2),C=k[0],N=k[1],y=Object(r.useState)(O),S=Object(n.a)(y,2),z=S[0],E=S[1],D=Object(r.useState)(!0),P=Object(n.a)(D,2),R=P[0],B=P[1],M=Object(r.useRef)(null);return Object(r.useEffect)((function(){g&&g.text!==C&&(B(!1),m({note:g,delay:5e3,metaOrMedia:"media",callbackFunction:function(){return B(!0)},beforeFunction:function(){g.text=C,Object(j.m)(g)}}))}),[C]),Object(p.jsxs)("div",{className:"container",style:l?{backgroundColor:"#171717",color:"white"}:{backgroundColor:z.color},children:[Object(p.jsx)("div",{className:"color-flag",style:l?"#ffffff"!==z.color?{backgroundImage:"linear-gradient(20deg, #171717 90%, "+z.colorPreview+" 90%)",color:"white"}:{backgroundColor:"#171717",color:"white"}:{backgroundColor:z.color}}),Object(p.jsx)("div",{className:"editor no-scrollbar",id:"editor",children:Object(p.jsx)(a.a,{style:{zoom:1.4},theme:"snow",value:C,onChange:function(e,t){return w(e,t,M,N)},modules:T,placeholder:"Write your next idea here...",ref:M,scrollingContainer:"#editor"})}),Object(p.jsx)("div",{className:"saved-changes",children:R?"All changes have been saved":"Unsaved changes..."}),Object(p.jsx)(x,{setCurrentPage:t,selectedNote:g,updateNote:c,editorState:C,deleteNote:i,darkMode:l,exportThread:s,setBackColor:E,threadCollectionSwap:d,moveToTheExtremity:u,dashboard:o,openOccurrences:b,packDashboard:h,editorRef:M})]})}}}]);
//# sourceMappingURL=8.8f50076d.chunk.js.map